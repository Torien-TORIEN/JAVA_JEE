# Exercice 3 :  Java Persistence API - en Standalone
Dans cet exercice, nous allons créer une entité Class Nation qui sera mappée avec la seule table de notre base de données.

## Création du projet `jpaTest`
- 1. Lancez Eclipse IDE for Enterprise Java Developers.  
- 2. Créez un simple projet Java nommé `jpaTest` (et non pas une application web dynamique).  
- 3. Créez une classe Java nommée Nation avec les bons attributs
- 4. Utilisez habilement Eclipse pour automatiquement générer les getter et setter de ces attributs: `Clic droit > sources > Generate Getters and Setters`  
- 5. Ajoutez un constructeur sans argument à cette classe.  
### Code V1 :
```
package mypackage;

public class Nation {
	private int id;
	private String nom;
	private int population;
	
	public Nation(int id , String nom, int pop) {
		this.id=id;this.nom=nom;population=pop;
	}
	
	public Nation() {
		id=0;
		nom="unknown";
		population=0;
	}

	public int getId() {
		return id;
	}

	public void setId(int id) {
		this.id = id;
	}

	public String getNom() {
		return nom;
	}

	public void setNom(String nom) {
		this.nom = nom;
	}

	public int getPopulation() {
		return population;
	}

	public void setPopulation(int population) {
		this.population = population;
	}

	@Override
	public String toString() {
		return "Nation [id=" + id + ", nom=" + nom + ", population=" + population + "]";
	}
	
	
	
}
```

## HIBERNATE 
- 6. Téléchargez et décompressez l’implémentation hibernate de la spécification [JPA ici](https://sourceforge.net/projects/hibernate/files/hibernate-orm/5.6.0.Final/hibernate-release-5.6.0.Final.zip/download) ou via https://hibernate.org/orm/.
	Indications : Il s’agit d’un fichier nommé `hibernate-release-xxx-final.zip`.  
- 7. Dans votre projet Eclipse, créez un répertoire `MesLibrairies`.  
- 8. Copiez tous les fichiers jar contenus du répertoire `hibernate-release-5.4.29.Final/lib/required/` vers le dossier `MesLibrairies`.  
- 9. Comme dans l’exercice précédent, ajoutez aussi au dossier MesLibrairies le fichier jar contenant le driver JDBC.  
- 10. Ajoutez tous ces fichiers jar au Build Path de votre projet. `Build Path > Configure Build Path` ou `Project > Properties > Librairies` : ![Build Path](../assets/buildpath.png)

## Entité , Table , Id
- 11. Transformez votre classe Nation en entité avec l’aide d’annotations JPA comme `@Entity`,`@Table` et `@Id`.
- a - `@Entity` : Cette annotation est utilisée pour marquer une classe comme une entité persistante. Une entité est une classe qui est associée à une table dans une base de données relationnelle. L'utilisation de @Entity indique à JPA que cette classe doit être gérée par le framework de persistance.  
- b -`@Table` : Cette annotation est utilisée pour spécifier le nom de la table avec laquelle l'entité est associée dans la base de données. Par défaut, le nom de la table est le même que le nom de la classe, mais en utilisant `@Table`, vous pouvez spécifier un nom de table différent.   
- Dans le contexte de votre question, l'annotation `@Table(name = "Nations")` est utilisée pour spécifier que l'entité Nation est associée à la table Nations dans la base de données.
- c -`@Id` : Cette annotation est utilisée pour spécifier la clé primaire de l'entité.  
### Code V2 :
```
package mypackage;

import javax.persistence.*;

@Entity @Table(name="Nations")
public class Nation {
	@Id
	private int id;
	private String nom;
	private int population;
	
	public Nation(int id , String nom, int pop) {
		this.id=id;this.nom=nom;population=pop;
	}
	
	public Nation() {
		id=0;
		nom="unknown";
		population=0;
	}

	public int getId() {
		return id;
	}

	public void setId(int id) {
		this.id = id;
	}

	public String getNom() {
		return nom;
	}

	public void setNom(String nom) {
		this.nom = nom;
	}

	public int getPopulation() {
		return population;
	}

	public void setPopulation(int population) {
		this.population = population;
	}

	@Override
	public String toString() {
		return "Nation [id=" + id + ", nom=" + nom + ", population=" + population + "]";
	}
	
}
```
### Attention ! :
- Si vous avez cette erreur c'=, c'est du au fichier `module-info.java`  
![Error ](../assets/error.png)
- Vous pouvez la corriger en supprimant simplement le fichier `module-info.java` ou vous ajoutez `requires java.persistence;` dans ce fichier et vous allez probablement faire face à une nouvelle erreur `javax.persistence cannot be resolved to a module` et il vous propose une solution pour la resoudre  .
```
module jpaTest {
    requires java.persistence;
}
```

## PESISTENCE
- 12. Créez un fichier de configuration nommé `persistence.xml` dans le dossier `src/META-INF/` de votre projet. (Créez le dossier src/META-INF/ si nécessaire).
## 
13. Dans un package jpaPack, créez une classe jpaMain avec une méthode main.